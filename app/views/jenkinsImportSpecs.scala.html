@(specs: List[JenkinsImportSpecView])(implicit flash: Flash, globalViewContext: GlobalViewContext)

@css = {
  <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/jenkinsImportSpecs.css")">
}

@main("Jenkins Imports", "Jenkins Imports", css = css) {

<h2>Jenkins Configuration</h2>  

@jenkinsConfigTabs("jobs")

 @if(specs.isEmpty) {

    <div class="panel panel-info">
      <div class="panel-heading">No jenkins jobs set up</div>
      <div class="panel-body">
        There are no Jenkins jobs set up for import yet. <a href="@routes.JenkinsController.newJenkinsImportSpec()">Configure a new Jenkins job to import from</a>.
      </div>
    </div>

 } else {

  <table style="margin-top: 20px" class="table table-striped table-bordered table-hover table-condensed">
    <thead>
      <tr>
        <th>Jenkins job URL</th>
        <th class="last-checked-col">Last checked</th>
        <th class="polling-interval-col">Polling interval</th>
        <th class="import-console-col">Import console log?</th>
        <th class="configuration-col">Configuration</th>
        <th colspan=4></th>
      </tr>
    </thead>
    <tbody>
      @for(spec <- specs) {
        <tr>
          <td><a href="@spec.jobUrl">@spec.jobUrl</a></td>
          <td class="last-checked-cell">
          @if(spec.inProgress) {
            <div class="progress">
              <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 10%"></div>
            </div>
          } else { 
	    @spec.lastCheckedOpt.getOrElse("-")
          }
          </td>
          <td class="polling-interval-cell">@spec.pollingInterval</td>
          <td class="import-console-cell">@if(spec.importConsoleLog) { <i class="glyphicon glyphicon-ok"></i> }</td>
          <td class="configuration-cell">@spec.configuration</td>
          <td class="configure-cell"><a href="@routes.JenkinsController.editJenkinsImportSpec(spec.id)">Configure</a></td>
          <td class="import-status-cell"><a href="@routes.JenkinsController.getJenkinsImportSpec(spec.id)">Imported builds</a></td>
          <td class="sync-cell">
            <form action="@routes.JenkinsController.syncJenkins(spec.id)" method="post">
              <button class="btn btn-default" title="Check for new builds now"><i class="glyphicon glyphicon-refresh"></i> Sync</button>
            </form>
          </td>
          <td class="delete-cell">
            <form action="@routes.JenkinsController.deleteJenkinsImportSpec(spec.id)" method="post">
              <button class="btn btn-default" title="Permanently delete this Jenkins import"><i class="glyphicon glyphicon-trash"></i> Delete</button>
            </form>
          </td>
        </tr>
      }
      <tr>
        <td colspan="9" style="text-align: center">
           <a href="@routes.JenkinsController.newJenkinsImportSpec"><i class="glyphicon glyphicon-plus"></i> Add new</a>
        </td>
      </tr>
    </tbody>
  </table>

}
}
